---
import Layout from '@layouts/Layout.astro';
import {
    getAllProperties,
    setArticleId,
    setClangId,
} from '@helpers/properties-management/server-properties';
import { getArticleByPath } from '@adapters/redaxo/article';

const { path } = Astro.params;

if (path === 'sitemap.xml' || path === 'robots.txt') {
    return Astro.redirect(`${import.meta.env.REDAXO_ROOT}/${path}`, 301);
}

const article = await getArticleByPath(path ?? '/', '1', {
    breadcrumbs: true,
    seo: true,
    slices: true,
    clang: true,
});

const clangId = article.clang.id;
setClangId(Astro, clangId);
setArticleId(Astro, article.id);
---

<Layout article={article} />
