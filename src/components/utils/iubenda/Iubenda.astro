---
import { getBanner } from '@helpers/iubenda';
import { getClangId } from '@helpers/properties-management/server-properties';
import { getSettings } from '@helpers/wildcards';
import './Iubenda.scss';
import type { Article, Clang } from '@adapters/redaxo/@types';

interface Props {
    article: Article;
    clangs: Clang[];
}

const { article, clangs } = Astro.props;

const bannerHTML = getBanner(Astro, clangs);
const settings = getSettings(Astro);
---

<Fragment
    set:html={settings.iubendaCookieBanner?.bannerData.replace(
        '{{BANNER_HTML}}',
        bannerHTML,
    )}
/>
<script type="text/javascript" is:inline>
    window.iubendaLanguageSwitch = () => {
        const menuToggler = document.querySelector(
            '.cookieBannerLanguageSwitch .cookieBannerLanguageToggler',
        );
        const menu = document.querySelector('.cookieBannerLanguageSwitch');
        menuToggler.onclick = () => {
            menu.classList.toggle('menu-open');
        };
    };
</script>
